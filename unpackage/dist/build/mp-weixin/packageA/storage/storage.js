(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["packageA/storage/storage"],{"4a59":function(e,s,t){"use strict";t.r(s);var d=t("5988"),r=t("4d49");for(var i in r)"default"!==i&&function(e){t.d(s,e,(function(){return r[e]}))}(i);t("7646");var n,a=t("f0c5"),o=Object(a["a"])(r["default"],d["b"],d["c"],!1,null,"e772976c",null,!1,d["a"],n);s["default"]=o.exports},"4d49":function(e,s,t){"use strict";t.r(s);var d=t("51b7"),r=t.n(d);for(var i in d)"default"!==i&&function(e){t.d(s,e,(function(){return d[e]}))}(i);s["default"]=r.a},"51b7":function(e,s,t){"use strict";(function(e){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var d=r(t("4795"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e,s,t,d,r,i,n){try{var a=e[i](n),o=a.value}catch(c){return void t(c)}a.done?s(o):Promise.resolve(o).then(d,r)}function n(e){return function(){var s=this,t=arguments;return new Promise((function(d,r){var n=e.apply(s,t);function a(e){i(n,d,r,a,o,"next",e)}function o(e){i(n,d,r,a,o,"throw",e)}a(void 0)}))}}var a=function(){t.e("components/uni-popup/uni-popup").then(function(){return resolve(t("8626"))}.bind(null,t)).catch(t.oe)},o={onLoad:function(e){var s=this;this.initAddress(),this.initorderProperty(),this.initRichText();var t=this.$dayjs().hour();this.nowTime=t;var d=this.timer.findIndex((function(e){if(s.nowTime==e.start)return!0}));this.timeList=this.timer.slice(d+1),this.signCode=0,"{}"==JSON.stringify(this.sendAddress)?this.sendAddressShow=!0:this.sendAddressShow=!1},onShow:function(){var s=e.getSystemInfoSync();if(this.platform=s.platform,this.initMyInfo(),this.initorderProperty(),this.createOrderTimer=this.$dayjs().hour(),e.getStorageSync("sendAddress")){var t=JSON.parse(e.getStorageSync("sendAddress"));this.sendAddress,this.sendAddress=t}if(e.getStorageSync("endAddress")){var d=JSON.parse(e.getStorageSync("endAddress"));this.endAddress=d,"undefined"===this.endAddress.addressDetail&&(this.endAddress.addressDetail="")}if(e.getStorageSync("shopInfo")){var r=e.getStorageSync("shopInfo");r&&void 0!=r&&(this.shopInfo=r)}if(e.getStorageSync("discount")){var i=e.getStorageSync("discount");void 0!=i.value&&(this.discount=i),console.log(this.discount)}else this.discount={};if(e.getStorageSync("takeTimer")){var n=e.getStorageSync("takeTimer");n&&void 0!=n&&(this.showChoiceTime=n)}this.isComputedDistance&&this.isComputedDistanceFunc(),this.isInitOrderPrice&&this.isInitOrderPriceAjax(),""!=this.countDown&&(clearInterval(this.countDown),this.minutes=30,this.seconds=0),"{}"==JSON.stringify(this.endAddress)?this.endAddressShow=!0:this.endAddressShow=!1,e.getStorageSync("remark")&&(this.remark=e.getStorageSync("remark"))},onUnload:function(){e.removeStorageSync("shopInfo"),e.removeStorageSync("discount"),e.removeStorageSync("takeTimer"),e.removeStorageSync("remark")},data:function(){return{platform:"",sendAddress:{},endAddress:{},car:0,scrollList:["帮我送","帮我取","帮我买"],carScrollList:["帮我送","帮我取"],scrollIndex:0,dayIndex:0,day:["今天","明天","后天"],rightIndex:999,timer:[{text:"9:00-10:00",start:"9",end:"10"},{text:"10:00-11:00",start:"10",end:"11"},{text:"11:00-12:00",start:"11",end:"12"},{text:"12:00-13:00",start:"12",end:"13"},{text:"13:00-14:00",start:"13",end:"14"},{text:"14:00-15:00",start:"14",end:"15"},{text:"15:00-16:00",start:"15",end:"16"},{text:"16:00-17:00",start:"16",end:"17"},{text:"17:00-18:00",start:"17",end:"18"},{text:"18:00-19:00",start:"18",end:"19"},{text:"19:00-20:00",start:"19",end:"20"},{text:"21:00-22:00",start:"21",end:"22"},{text:"22:00-23:00",start:"22",end:"23"},{text:"23:00-24:00",start:"23",end:"24"}],timeList:[],choiceTime:"",showChoiceTime:"",showDay:"",choiceMinunte:"",dayTimer:"",choiceMinunteEnd:"",assignList:["骑手就近购买","指定地址"],assignIndex:0,grant:[0,1,2,3,4,5],giveGrant:"",totalPrice:0,priceDetailshow:!1,payInfo:[{image:"../../static/image/order/yuezhifu.png",text:"余额支付",sectext:""},{image:"../../static/image/order/weixinzhifu.png",text:"微信支付",sectext:""}],circleShow:0,horsemanCircle:!1,sendAddressShow:!0,endAddressShow:!0,shopInfo:{},discount:{},distance:"",signCode:0,goldCode:0,urgentCode:0,stayWarmCode:0,remark:"",orderComputed:{},minutes:30,seconds:0,countDown:"",horseman:!1,horsemanCount:"",horsemanList:[],addPirce:0,orderId:"",RichText:[],orderProperty:"",helpBuy:0,riderSide:3,payFlag:!0,shopAppraisement:!1,helpBuyTextArea:"",appraisement:"",helpbuyCircle:!0,choiceMinunteStart:"",Nhorseman:!1,xiaopiaoCircle:!1,newAddPrice:0,adcode:""}},components:{uniPopup:a},watch:{sendAddress:function(e,s){e!=s&&(this.sendAddressShow=!1,"{}"!=JSON.stringify(e)&&"{}"!=JSON.stringify(this.endAddress)&&this.isComputedDistanceFunc(),this.isInitOrderPriceAjax())},endAddress:function(e,s){e!=s&&(this.endAddressShow=!1,"{}"!=JSON.stringify(e)&&"{}"!=JSON.stringify(this.sendAddress)&&this.isComputedDistanceFunc(),this.isInitOrderPriceAjax())},signCode:function(e,s){e!=s&&this.isInitOrderPriceAjax()},goldCode:function(e,s){e!=s&&this.isInitOrderPriceAjax()},urgentCode:function(e,s){e!=s&&this.isInitOrderPriceAjax()},stayWarmCode:function(e,s){e!=s&&this.isInitOrderPriceAjax()},giveGrant:function(e,s){e!=s&&this.isInitOrderPriceAjax()},distance:function(e,s){e!=s&&this.isInitOrderPriceAjax()},second:{handler:function(e){this.num(e)}},minute:{handler:function(e){this.num(e)}}},computed:{isComputedDistance:function(){return"{}"!=JSON.stringify(this.sendAddress)&&"{}"!=JSON.stringify(this.endAddress)},isInitOrderPrice:function(){return"{}"!=JSON.stringify(this.sendAddress)&&"{}"!=JSON.stringify(this.endAddress)&&"{}"!=JSON.stringify(this.shopInfo)}},methods:{closePay:function(s){clearInterval(this.countDown),this.countDown=null,this.minutes=30,this.seconds=0,!s.show&&this.payFlag&&e.getStorageSync("discount")&&(e.setStorageSync("userSelect",0),e.switchTab({url:"../order/order"}))},goBack:function(){e.navigateBack({delta:1})},goTofreight:function(s){e.navigateTo({url:"../../packageA/freightDeatail/freightDeatail?freightInfo="+JSON.stringify(this.orderComputed)+"&status="+s})},goToRemark:function(){e.navigateTo({url:"../../packageA/remark/remark"})},closeShopAppraisement:function(){this.shopAppraisement=!this.shopAppraisement,e.hideKeyboard()},checkShopInfoPrice:function(){},needTicket:function(){this.xiaopiaoCircle=!this.xiaopiaoCircle,this.xiaopiaoCircle?this.helpBuyTextArea=this.helpBuyTextArea+" 需要小票":this.helpBuyTextArea=this.helpBuyTextArea.replace(" 需要小票","")},initMyInfo:function(){var e=this;return n(d.default.mark((function s(){var t;return d.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.$fetch(e.$api.currentUser,{},"GET","form");case 2:t=s.sent,e.payInfo[0].sectext="("+Number(t.data.amount).toFixed(2)+")";case 4:case"end":return s.stop()}}),s)})))()},hangdleAssignIndex:function(s){var t=this;if(this.assignIndex=s,this.helpBuy=s,1==s){var d=this;this.sendAddress.addressDetail="",e.chooseLocation({success:function(s){var r=s;e.request({url:"https://restapi.amap.com/v3/geocode/regeo?output=JSON&location="+s.longitude+","+s.latitude+"&key=6223011d1e55de8ee9d00617ee5270c2&radius=1000&extensions=all",success:function(s){"地图位置"===r.name&&(r.name=s.data.regeocode.aois[0].name),r.address=s.data.regeocode.formatted_address,t.sendAddress.addressDetail instanceof Array?(d.sendAddress.addressDetail[0]=r.address,d.sendAddress.addressDetail[1]="",d.sendAddress.addressDetail[2]=r.name,d.sendAddress.latitude=r.longitude+","+r.latitude):(d.sendAddress.editAddress=r,d.sendAddress.latitude=d.sendAddress.editAddress.longitude+","+d.sendAddress.editAddress.latitude,t.sendAddressShow=!1),e.setStorageSync("sendAddress",JSON.stringify(d.sendAddress)),t.isComputedDistanceFunc(),t.isInitOrderPriceAjax()}})},complete:function(){t.isComputedDistanceFunc(),t.isInitOrderPriceAjax()}})}this.isInitOrderPriceAjax()},handleScrollIndex:function(s){this.scrollIndex=s,this.shopInfo={},this.discount={},this.showChoiceTime="马上取件",this.assignIndex=0,this.choiceTime="",this.showDay="",this.choiceMinunte="",this.dayTimer="",this.choiceMinunteEnd="",this.giveGrant="",this.totalPrice=0,this.orderComputed={},this.helpBuy=0,this.helpBuyTextArea="",this.choiceMinunteStart=0,this.rightIndex=999,e.removeStorageSync("takeTimer"),e.removeStorageSync("shopInfo"),e.removeStorageSync("discount")},pickTimer:function(){this.$refs.popup.open(),this.handleDayIndex(this.dayIndex)},handleDayIndex:function(e){var s=this;if((e||0==e)&&(this.showDay=this.day[e]),this.dayIndex=e,0===e){this.dayTimer=this.$dayjs().format("YYYY-MM-DD");var t=this.timer.findIndex((function(e){if(s.nowTime==e.start)return!0}));this.timeList=this.timer.slice(t+1)}else 1===e?(this.dayTimer=this.$dayjs().add(1,"day").format("YYYY-MM-DD"),this.timeList=[]):2===e&&(this.dayTimer=this.$dayjs().add(2,"day").format("YYYY-MM-DD"),this.timeList=[]);this.rightIndex=999},handleRight:function(e,s){"马上取件"===this.showChoiceTime&&(this.choiceMinunteStart=0),this.rightIndex=s,this.choiceMinunte=e,this.choiceMinunteEnd=e.end,this.choiceMinunteStart=e.start},initTakeNow:function(){this.dayIndex=0,this.rightIndex=999},initorderProperty:function(){var e=this;return n(d.default.mark((function s(){var t;return d.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.$fetch(e.$api.orderProperty,{carType:e.car},"GET","form");case 2:t=s.sent,console.log(t),t.code,e.orderProperty=t.data.bond,e.riderSide=t.data.distance,e.newAddPrice=t.data.capacitySubsidy,e.yunliTimerStart=t.data.noCapacityMonitoringPeriod.split("-")[0],e.yunliTimerEnd=t.data.noCapacityMonitoringPeriod.split("-")[1];case 10:case"end":return s.stop()}}),s)})))()},popSubmit:function(){this.$refs.popup.close(),this.choiceTime=this.dayTimer+" "+this.choiceMinunteStart,999!=this.rightIndex?this.showChoiceTime=this.showDay+" "+this.choiceMinunte.text:this.showChoiceTime="马上取件",e.setStorageSync("takeTimer",this.showChoiceTime)},goToAddress:function(s){e.navigateTo({url:"../address/address?address="+s})},setHelpBuyInfo:function(){this.appraisement<=0&&1==e.getStorageSync("shopInfo")?(this.appraisement=1,e.showToast({title:"商品预估价最低1元",icon:"none"})):this.appraisement>500&&(this.appraisement=500,e.showToast({title:"商品预估价最高500元",icon:"none"})),this.helpBuyTextArea.trim()&&(this.shopInfo.main=this.helpBuyTextArea),this.appraisement&&(this.shopInfo.price=this.appraisement),this.helpBuyTextArea.trim()&&this.appraisement&&(e.setStorageSync("shopInfo",this.shopInfo),this.isInitOrderPriceAjax()),""===this.helpBuyTextArea&&(this.orderComputed.payAmount=0)},goToShopInfo:function(){"{}"!=JSON.stringify(this.sendAddress)&&"{}"!=JSON.stringify(this.endAddress)?2==this.scrollIndex?e.navigateTo({url:"../buyShopInfo/buyShopInfo"}):e.navigateTo({url:"../shopInfo/shopInfo"}):e.showToast({icon:"none",title:"请先填写地址"})},goToDiscount:function(){e.navigateTo({url:"../discount/discount?payAmount="+this.orderComputed.payAmount})},selectedGrant:function(e){var s=e.detail.value;this.giveGrant=this.grant[s]},handleBilldetail:function(){var s=this;return n(d.default.mark((function t(){var r,i;return d.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:2==s.scrollIndex&&0==s.assignIndex&&(s.sendAddress=s.endAddress),r=s.sendAddress.latitude.split(",")[1],i=s.sendAddress.latitude.split(",")[0],2==s.scrollIndex&&0==s.assignIndex&&(r=s.endAddress.latitude.split(",")[1],i=s.endAddress.latitude.split(",")[0]),r=Number(r).toFixed(6),i=Number(i).toFixed(5),e.request({url:"https://restapi.amap.com/v3/geocode/regeo?output=JSON&location="+i+","+r+"&key=6223011d1e55de8ee9d00617ee5270c2&radius=1000&extensions=all",success:function(){var t=n(d.default.mark((function t(r){var i,n,a,o,c;return d.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s.adcode=r.data.regeocode.addressComponent.adcode.substring(0,4),t.next=3,s.$fetch(s.$api.testAdcode,{adcode:s.adcode},"POST","FORM");case 3:if(i=t.sent,0==i.code){t.next=8;break}return t.abrupt("return",e.showToast({icon:"none",title:"该地区暂未开通服务，敬请期待"}));case 8:if(void 0!==s.shopInfo.main&&void 0!==s.shopInfo.price){t.next=11;break}return e.showToast({title:"请检查您要下单的信息",icon:"none"}),t.abrupt("return");case 11:if(2==s.scrollIndex){t.next=15;break}if(""!=s.sendAddress.mobile.trim()&&""!=s.sendAddress.name.trim()){t.next=15;break}return e.showToast({icon:"none",title:"请完善取货地址信息"}),t.abrupt("return");case 15:if(2!==s.scrollIndex||s.helpbuyCircle){t.next=18;break}return e.showToast({title:"请认真阅读帮买服务协议",icon:"none"}),t.abrupt("return");case 18:if(""!==s.sendAddress.latitude||"{}"==JSON.stringify(s.endAddress)||"{}"==JSON.stringify(s.shopInfo)){t.next=21;break}return e.showToast({title:"未获取到详细地址,请先完善信息",icon:"none"}),t.abrupt("return");case 21:if("{}"!==JSON.stringify(s.sendAddress.editAddress)&&"{}"!==JSON.stringify(s.endAddress.editAddress)){t.next=24;break}return e.showToast({icon:"none",title:"未获取到详细地址,请先完善信息"}),t.abrupt("return");case 24:if(!s.discount.type){t.next=28;break}if(!(s.orderComputed.payAmount<50)){t.next=28;break}return e.showToast({icon:"none",title:"订单金额小于50，无法使用优惠"}),t.abrupt("return");case 28:if("{}"!=JSON.stringify(s.sendAddress)&&"{}"!=JSON.stringify(s.endAddress)&&"{}"!=JSON.stringify(s.shopInfo)){t.next=33;break}return e.showToast({icon:"none",title:"请检查您要下单的信息"}),t.abrupt("return");case 33:return n=s.sendAddress.latitude.split(",")[1],a=s.sendAddress.latitude.split(",")[0],n=Number(n).toFixed(6),a=Number(a).toFixed(5),o=null,t.next=40,s.$fetch(s.$api.getScanRange,{},"GET","Form");case 40:c=t.sent,0===c.code&&(o=c.data.taskScanRange),e.request({url:"https://tsapi.amap.com/v1/track/terminal/aroundsearch",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{key:"4145121d3d1b5dcf41702960f3bd5adc",sid:"126730",center:n+","+a,radius:1e3*o},success:function(e){s.horsemanCount=e.data.data.count,s.horsemanList=e.data.data.results,s.createOrderTimer>=s.yunliTimerStart&&s.createOrderTimer<=s.yunliTimerEnd&&(s.horseman=!0,s.Nhorseman=!0),0==s.horseman&&(s.Nhorseman=!1,s.$refs.popups.open())}});case 43:case"end":return t.stop()}}),t)})));function r(e){return t.apply(this,arguments)}return r}()});case 7:case"end":return t.stop()}}),t)})))()},handlePopPay:function(){var e=this;return n(d.default.mark((function s(){return d.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:e.isCreateOrderPriceAjax();case 1:case"end":return s.stop()}}),s)})))()},handleCircle:function(e){this.circleShow=e},handleDetailshow:function(){this.priceDetailshow=!this.priceDetailshow},handleHorsemanCircle:function(){this.horsemanCircle=!this.horsemanCircle},handleHorsemanShow:function(){this.addPirce=0,this.isInitOrderPriceAjax(),this.horseman=!1},goToEdit:function(s,t,d){var r=this;if(2!==this.scrollIndex||0!==t||0!==this.assignIndex)if(2===this.scrollIndex&&0===t&&1===this.assignIndex){var i=this;e.chooseLocation({success:function(s){var t=s;e.request({url:"https://restapi.amap.com/v3/geocode/regeo?output=JSON&location="+s.longitude+","+s.latitude+"&key=6223011d1e55de8ee9d00617ee5270c2&radius=1000&extensions=all",success:function(s){"地图位置"===t.name&&(t.name=s.data.regeocode.aois[0].name),t.address=s.data.regeocode.formatted_address,r.sendAddress.addressDetail instanceof Array?(i.sendAddress.addressDetail[0]=t.address,i.sendAddress.addressDetail[1]="",i.sendAddress.addressDetail[2]=t.name,i.sendAddress.latitude=t.longitude+","+t.latitude):(i.sendAddress.editAddress=t,i.sendAddress.latitude=i.sendAddress.editAddress.longitude+","+i.sendAddress.editAddress.latitude),e.setStorageSync("sendAddress",JSON.stringify(i.sendAddress)),r.isComputedDistanceFunc(),setTimeout((function(){r.isComputedDistanceFunc()}),1e3),r.isInitOrderPriceAjax()}})},complete:function(){r.isComputedDistanceFunc(),r.isInitOrderPriceAjax()}})}else e.navigateTo({url:"../editAddress/editAddress?addressInfo="+JSON.stringify(s)+"&status="+t+"&id="+d})},initAddress:function(){return n(d.default.mark((function e(){return d.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},handleSignCode:function(e){e.detail.value?this.signCode=1:this.signCode=0},handleGoldCode:function(e){e.detail.value?this.goldCode=1:this.goldCode=0},handleUrgentCode:function(e){e.detail.value?this.urgentCode=1:this.urgentCode=0},handleStayWarmCode:function(e){e.detail.value?this.stayWarmCode=1:this.stayWarmCode=0},isInitOrderPriceAjax:function(){var s=this;return n(d.default.mark((function t(){var r,i,n,a,o,c,u,l,p,g,h,f,m,y,A;return d.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==s.sendAddress.latitude||"{}"==JSON.stringify(s.endAddress)||"{}"==JSON.stringify(s.shopInfo)){t.next=3;break}return e.showToast({title:"未获取到详细地址,请先完善信息",icon:"none"}),t.abrupt("return");case 3:if(void 0!==s.shopInfo.price){t.next=5;break}return t.abrupt("return");case 5:if("{}"==JSON.stringify(s.endAddress)||"{}"==JSON.stringify(s.shopInfo)){t.next=87;break}if(r=null,2==s.scrollIndex&&0!=s.assignIndex&&(r=s.sendAddress.addressDetail instanceof Array?s.sendAddress.addressDetail[0]+""+s.sendAddress.addressDetail[1]:s.sendAddress.editAddress.address+""+s.sendAddress.addressDetail),i=JSON.stringify(r),n=JSON.stringify(s.endAddress.editAddress.address+""+s.endAddress.addressDetail),999!==s.rightIndex){t.next=50;break}if("{}"!==JSON.stringify(s.discount)){t.next=31;break}if(2!==s.scrollIndex){t.next=25;break}if(0!==s.assignIndex){t.next=18;break}return t.next=16,s.$fetch(s.$api.orderCalculation,{buyAddressType:1,endAddress:JSON.stringify({addressDetail:n,latitude:s.endAddress.latitude}),tip:s.giveGrant,goodsInventory:JSON.stringify({weight:s.shopInfo.weight,cost:s.shopInfo.price,goods:s.shopInfo.main}),distance:s.riderSide,type:s.scrollIndex,pickUpType:0,carType:s.car,incubatorFlag:s.stayWarmCode,premiumFlag:s.goldCode,urgentExpressPriceFlag:s.urgentCode,signForCodeFlag:s.signCode,goodsPredictAmount:50,subsidy:s.addPirce},"POST");case 16:a=t.sent,0==a.code&&(s.orderComputed=a.data);case 18:if(1!==s.assignIndex){t.next=23;break}return t.next=21,s.$fetch(s.$api.orderCalculation,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:i,latitude:s.sendAddress.latitude}),endAddress:JSON.stringify({addressDetail:n,latitude:s.endAddress.latitude}),tip:s.giveGrant,goodsInventory:JSON.stringify({weight:s.shopInfo.weight,cost:s.shopInfo.price,goods:s.shopInfo.main}),distance:s.distance,type:s.scrollIndex,pickUpType:0,carType:s.car,incubatorFlag:s.stayWarmCode,premiumFlag:s.goldCode,urgentExpressPriceFlag:s.urgentCode,signForCodeFlag:s.signCode,goodsPredictAmount:50,subsidy:s.addPirce},"POST");case 21:o=t.sent,0==o.code&&(s.orderComputed=o.data);case 23:t.next=29;break;case 25:return t.next=27,s.$fetch(s.$api.orderCalculation,{buyAddressType:s.assignIndex,startAddress:JSON.stringify({addressDetail:i,latitude:s.sendAddress.latitude}),endAddress:JSON.stringify({addressDetail:n,latitude:s.endAddress.latitude}),tip:s.giveGrant,goodsInventory:JSON.stringify({weight:s.shopInfo.weight,cost:s.shopInfo.price,goods:s.shopInfo.main}),distance:s.distance,type:s.scrollIndex,pickUpType:0,carType:s.car,incubatorFlag:s.stayWarmCode,premiumFlag:s.goldCode,urgentExpressPriceFlag:s.urgentCode,signForCodeFlag:s.signCode,goodsPredictAmount:"",subsidy:s.addPirce},"POST");case 27:c=t.sent,0==c.code&&(s.orderComputed=c.data);case 29:t.next=48;break;case 31:if(2!==s.scrollIndex){t.next=44;break}if(0!==s.assignIndex){t.next=37;break}return t.next=35,s.$fetch(s.$api.orderCalculation,{buyAddressType:1,endAddress:JSON.stringify({addressDetail:n,latitude:s.endAddress.latitude}),tip:s.giveGrant,goodsInventory:JSON.stringify({weight:s.shopInfo.weight,cost:s.shopInfo.price,goods:s.shopInfo.main}),distance:s.riderSide,type:s.scrollIndex,pickUpType:0,carType:s.car,incubatorFlag:s.stayWarmCode,premiumFlag:s.goldCode,urgentExpressPriceFlag:s.urgentCode,signForCodeFlag:s.signCode,userCouponId:s.discount.id,goodsPredictAmount:50,subsidy:s.addPirce},"POST");case 35:u=t.sent,0==u.code&&(s.orderComputed=u.data);case 37:if(1!==s.assignIndex){t.next=42;break}return t.next=40,s.$fetch(s.$api.orderCalculation,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:i,latitude:s.sendAddress.latitude}),endAddress:JSON.stringify({addressDetail:n,latitude:s.endAddress.latitude}),tip:s.giveGrant,goodsInventory:JSON.stringify({weight:s.shopInfo.weight,cost:s.shopInfo.price,goods:s.shopInfo.main}),distance:s.distance,type:s.scrollIndex,pickUpType:0,carType:s.car,incubatorFlag:s.stayWarmCode,premiumFlag:s.goldCode,urgentExpressPriceFlag:s.urgentCode,signForCodeFlag:s.signCode,userCouponId:s.discount.id,goodsPredictAmount:50,subsidy:s.addPirce},"POST");case 40:l=t.sent,0==l.code&&(s.orderComputed=l.data);case 42:t.next=48;break;case 44:return t.next=46,s.$fetch(s.$api.orderCalculation,{buyAddressType:s.assignIndex,startAddress:JSON.stringify({addressDetail:i,latitude:s.sendAddress.latitude}),endAddress:JSON.stringify({addressDetail:n,latitude:s.endAddress.latitude}),tip:s.giveGrant,goodsInventory:JSON.stringify({weight:s.shopInfo.weight,cost:s.shopInfo.price,goods:s.shopInfo.main}),distance:s.distance,type:s.scrollIndex,pickUpType:0,carType:s.car,incubatorFlag:s.stayWarmCode,premiumFlag:s.goldCode,urgentExpressPriceFlag:s.urgentCode,signForCodeFlag:s.signCode,userCouponId:s.discount.id,goodsPredictAmount:"",subsidy:s.addPirce},"POST");case 46:p=t.sent,0==p.code&&(s.orderComputed=p.data);case 48:t.next=87;break;case 50:if("{}"!==JSON.stringify(s.discount)){t.next=70;break}if(2!==s.scrollIndex){t.next=64;break}if(0!==s.assignIndex){t.next=57;break}return t.next=55,s.$fetch(s.$api.orderCalculation,{buyAddressType:1,endAddress:JSON.stringify({addressDetail:n,latitude:s.endAddress.latitude}),tip:s.giveGrant,goodsInventory:JSON.stringify({weight:s.shopInfo.weight,cost:s.shopInfo.price,goods:s.shopInfo.main}),distance:s.riderSide,type:s.scrollIndex,pickUpType:1,pickUpTime:s.choiceTime+":00:00",carType:s.car,incubatorFlag:s.stayWarmCode,premiumFlag:s.goldCode,urgentExpressPriceFlag:s.urgentCode,signForCodeFlag:s.signCode,goodsPredictAmount:s.shopInfo.price,subsidy:s.addPirce},"POST");case 55:g=t.sent,0==g.code&&(s.orderComputed=g.data);case 57:if(1!==s.assignIndex){t.next=62;break}return t.next=60,s.$fetch(s.$api.orderCalculation,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:i,latitude:s.sendAddress.latitude}),endAddress:JSON.stringify({addressDetail:n,latitude:s.endAddress.latitude}),tip:s.giveGrant,goodsInventory:JSON.stringify({weight:s.shopInfo.weight,cost:s.shopInfo.price,goods:s.shopInfo.main}),distance:s.riderSide,type:s.scrollIndex,pickUpType:1,pickUpTime:s.choiceTime+":00:00",carType:s.car,incubatorFlag:s.stayWarmCode,premiumFlag:s.goldCode,urgentExpressPriceFlag:s.urgentCode,signForCodeFlag:s.signCode,goodsPredictAmount:s.shopInfo.price,subsidy:s.addPirce},"POST");case 60:h=t.sent,0==h.code&&(s.orderComputed=h.data);case 62:t.next=68;break;case 64:return t.next=66,s.$fetch(s.$api.orderCalculation,{buyAddressType:s.assignIndex,startAddress:JSON.stringify({addressDetail:i,latitude:s.sendAddress.latitude}),endAddress:JSON.stringify({addressDetail:n,latitude:s.endAddress.latitude}),tip:s.giveGrant,goodsInventory:JSON.stringify({weight:s.shopInfo.weight,cost:s.shopInfo.price,goods:s.shopInfo.main}),distance:s.distance,type:s.scrollIndex,pickUpType:1,pickUpTime:s.choiceTime+":00:00",carType:s.car,incubatorFlag:s.stayWarmCode,premiumFlag:s.goldCode,urgentExpressPriceFlag:s.urgentCode,signForCodeFlag:s.signCode,goodsPredictAmount:"",subsidy:s.addPirce},"POST");case 66:f=t.sent,0==f.code&&(s.orderComputed=f.data);case 68:t.next=87;break;case 70:if(2!==s.scrollIndex){t.next=83;break}if(0!==s.assignIndex){t.next=76;break}return t.next=74,s.$fetch(s.$api.orderCalculation,{buyAddressType:1,endAddress:JSON.stringify({addressDetail:n,latitude:s.endAddress.latitude}),tip:s.giveGrant,goodsInventory:JSON.stringify({weight:s.shopInfo.weight,cost:s.shopInfo.price,goods:s.shopInfo.main}),distance:s.riderSide,type:s.scrollIndex,pickUpType:1,pickUpTime:s.choiceTime+":00:00",carType:s.car,incubatorFlag:s.stayWarmCode,premiumFlag:s.goldCode,urgentExpressPriceFlag:s.urgentCode,signForCodeFlag:s.signCode,userCouponId:s.discount.id,goodsPredictAmount:s.shopInfo.price,subsidy:s.addPirce},"POST");case 74:m=t.sent,0==m.code&&(s.orderComputed=m.data);case 76:if(1!==s.assignIndex){t.next=81;break}return t.next=79,s.$fetch(s.$api.orderCalculation,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:i,latitude:s.sendAddress.latitude}),endAddress:JSON.stringify({addressDetail:n,latitude:s.endAddress.latitude}),tip:s.giveGrant,goodsInventory:JSON.stringify({weight:s.shopInfo.weight,cost:s.shopInfo.price,goods:s.shopInfo.main}),distance:s.riderSide,type:s.scrollIndex,pickUpType:1,pickUpTime:s.choiceTime+":00:00",carType:s.car,incubatorFlag:s.stayWarmCode,premiumFlag:s.goldCode,urgentExpressPriceFlag:s.urgentCode,signForCodeFlag:s.signCode,userCouponId:s.discount.id,goodsPredictAmount:s.shopInfo.price,subsidy:s.addPirce},"POST");case 79:y=t.sent,0==y.code&&(s.orderComputed=y.data);case 81:t.next=87;break;case 83:return t.next=85,s.$fetch(s.$api.orderCalculation,{buyAddressType:s.assignIndex,startAddress:JSON.stringify({addressDetail:i,latitude:s.sendAddress.latitude}),endAddress:JSON.stringify({addressDetail:n,latitude:s.endAddress.latitude}),tip:s.giveGrant,goodsInventory:JSON.stringify({weight:s.shopInfo.weight,cost:s.shopInfo.price,goods:s.shopInfo.main}),distance:s.distance,type:s.scrollIndex,pickUpType:1,pickUpTime:s.choiceTime+":00:00",carType:s.car,incubatorFlag:s.stayWarmCode,premiumFlag:s.goldCode,urgentExpressPriceFlag:s.urgentCode,signForCodeFlag:s.signCode,userCouponId:s.discount.id,goodsPredictAmount:"",subsidy:s.addPirce},"POST");case 85:A=t.sent,0==A.code&&(s.orderComputed=A.data);case 87:case"end":return t.stop()}}),t)})))()},isComputedDistanceFunc:function(){var s=this;if("{}"!=JSON.stringify(this.sendAddress)&&"{}"!=JSON.stringify(this.endAddress)){console.log(JSON.stringify(this.sendAddress)+"^^"),this.sendAddress.addressDetail instanceof Array?e.request({url:"https://restapi.amap.com/v4/direction/bicycling?origin="+this.sendAddress.latitude+"&destination="+this.endAddress.latitude+"&key=6223011d1e55de8ee9d00617ee5270c2",success:function(e){console.log(e.data),s.distance=e.data.data.paths[0].distance/1e3,console.log(s.distance+"********")}}):e.request({url:"https://restapi.amap.com/v4/direction/bicycling?origin="+this.sendAddress.latitude+"&destination="+this.endAddress.latitude+"&key=6223011d1e55de8ee9d00617ee5270c2",success:function(e){s.distance=e.data.data.paths[0].distance/1e3}})}},isCreateOrderPriceAjax:function(){var e=this;return n(d.default.mark((function s(){var t,r,i,n,a,o,c,u,l,p,g,h,f,m,y,A,x,I,S,C,T,b,O,w;return d.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if("{}"==JSON.stringify(e.sendAddress)||"{}"==JSON.stringify(e.endAddress)||"{}"==JSON.stringify(e.shopInfo)){s.next=123;break}if(t=null,r=null,i=null,n=null,a=null,o=null,c=null,e.sendAddress.addressDetail instanceof Array?(t=e.sendAddress.addressDetail[0]+""+e.sendAddress.addressDetail[1],i=e.sendAddress.addressDetail[1],r=e.sendAddress.addressDetail[2],n=e.sendAddress.addressDetail[0],a=e.endAddress.editAddress.name,o=e.endAddress.addressDetail,c=e.endAddress.editAddress.address):(t=e.sendAddress.editAddress.address+""+e.sendAddress.addressDetail,i=e.sendAddress.addressDetail,r=e.sendAddress.editAddress.name,n=e.sendAddress.editAddress.address,a=e.endAddress.editAddress.name,o=e.endAddress.addressDetail,c=e.endAddress.editAddress.address),u=t,l=t.indexOf("市"),u=t.substring(l+1,l+t.length),p=e.endAddress.editAddress.address+""+e.endAddress.addressDetail,g=p.indexOf("市"),p=p.substring(g+1,g+p.length),h=0,2===e.scrollIndex&&(h=50),999!==e.rightIndex){s.next=83;break}if("{}"!==JSON.stringify(e.discount)){s.next=52;break}if(2!==e.scrollIndex||0!==e.helpBuy){s.next=31;break}return s.next=22,e.$fetch(e.$api.orderCreate,{buyAddressType:1,startAddress:JSON.stringify({addressDetail:p,latitude:e.endAddress.latitude,title:a,name:c,detail:o,userName:e.endAddress.name,mobile:e.endAddress.mobile}),endAddress:JSON.stringify({addressDetail:p,latitude:e.endAddress.latitude,title:a,name:c,detail:o,userName:e.endAddress.name,mobile:e.endAddress.mobile}),tip:e.giveGrant,goodsInventory:JSON.stringify({weight:e.shopInfo.weight,cost:e.shopInfo.price,goods:e.shopInfo.main}),distance:e.riderSide,type:e.scrollIndex,pickUpType:0,carType:e.car,incubatorFlag:e.stayWarmCode,premiumFlag:e.goldCode,urgentExpressPriceFlag:e.urgentCode,signForCodeFlag:e.signCode,goodsPredictAmount:h,subsidy:e.addPirce,remark:e.remark,adcode:e.adcode},"POST");case 22:f=s.sent,console.log(f),console.log("111"),e.orderId=f.data,e.$refs.popups.close(),e.$refs.popupPay.open(),e.countDownTimer(),s.next=50;break;case 31:if(m=0,2===e.scrollIndex&&(m=50),2!=e.scrollIndex||1!=e.assignIndex){s.next=43;break}return s.next=36,e.$fetch(e.$api.orderCreate,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:u,latitude:e.sendAddress.latitude,title:r,name:n,detail:i,userName:e.endAddress.name,mobile:e.endAddress.mobile}),endAddress:JSON.stringify({addressDetail:p,latitude:e.endAddress.latitude,name:c,title:a,detail:o,userName:e.endAddress.name,mobile:e.endAddress.mobile}),tip:e.giveGrant,goodsInventory:JSON.stringify({weight:e.shopInfo.weight,cost:e.shopInfo.price,goods:e.shopInfo.main}),distance:e.distance,type:e.scrollIndex,pickUpType:0,carType:e.car,incubatorFlag:e.stayWarmCode,premiumFlag:e.goldCode,urgentExpressPriceFlag:e.urgentCode,signForCodeFlag:e.signCode,goodsPredictAmount:m,subsidy:e.addPirce,remark:e.remark,adcode:e.adcode},"POST");case 36:y=s.sent,e.orderId=y.data,e.$refs.popups.close(),e.$refs.popupPay.open(),e.countDownTimer(),s.next=50;break;case 43:return s.next=45,e.$fetch(e.$api.orderCreate,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:u,latitude:e.sendAddress.latitude,title:r,name:n,detail:i,userName:e.sendAddress.name,mobile:e.sendAddress.mobile}),endAddress:JSON.stringify({addressDetail:p,latitude:e.endAddress.latitude,name:c,title:a,detail:o,userName:e.endAddress.name,mobile:e.endAddress.mobile}),tip:e.giveGrant,goodsInventory:JSON.stringify({weight:e.shopInfo.weight,cost:e.shopInfo.price,goods:e.shopInfo.main}),distance:e.distance,type:e.scrollIndex,pickUpType:0,carType:e.car,incubatorFlag:e.stayWarmCode,premiumFlag:e.goldCode,urgentExpressPriceFlag:e.urgentCode,signForCodeFlag:e.signCode,goodsPredictAmount:m,subsidy:e.addPirce,remark:e.remark,adcode:e.adcode},"POST");case 45:A=s.sent,e.orderId=A.data,e.$refs.popups.close(),e.$refs.popupPay.open(),e.countDownTimer();case 50:s.next=81;break;case 52:if(2!==e.scrollIndex||0!==e.helpBuy){s.next=62;break}return s.next=55,e.$fetch(e.$api.orderCreate,{buyAddressType:1,startAddress:JSON.stringify({addressDetail:p,latitude:e.endAddress.latitude,title:a,name:c,detail:o,userName:e.endAddress.name,mobile:e.endAddress.mobile}),endAddress:JSON.stringify({addressDetail:p,latitude:e.endAddress.latitude,title:a,name:c,detail:o,userName:e.endAddress.name,mobile:e.endAddress.mobile}),tip:e.giveGrant,goodsInventory:JSON.stringify({weight:e.shopInfo.weight,cost:e.shopInfo.price,goods:e.shopInfo.main}),distance:e.riderSide,type:e.scrollIndex,pickUpType:0,carType:e.car,incubatorFlag:e.stayWarmCode,premiumFlag:e.goldCode,urgentExpressPriceFlag:e.urgentCode,signForCodeFlag:e.signCode,userCouponId:e.discount.id,goodsPredictAmount:h,subsidy:e.addPirce,remark:e.remark,adcode:e.adcode},"POST");case 55:x=s.sent,e.orderId=x.data,e.$refs.popups.close(),e.$refs.popupPay.open(),e.countDownTimer(),s.next=81;break;case 62:if(I=0,2===e.scrollIndex&&(I=50),2!=e.scrollIndex||1!=e.assignIndex){s.next=74;break}return s.next=67,e.$fetch(e.$api.orderCreate,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:u,latitude:e.sendAddress.latitude,title:r,name:n,detail:i,userName:e.endAddress.name,mobile:e.endAddress.mobile}),endAddress:JSON.stringify({addressDetail:p,latitude:e.endAddress.latitude,title:a,name:c,detail:o,userName:e.endAddress.name,mobile:e.endAddress.mobile}),tip:e.giveGrant,goodsInventory:JSON.stringify({weight:e.shopInfo.weight,cost:e.shopInfo.price,goods:e.shopInfo.main}),distance:e.distance,type:e.scrollIndex,pickUpType:0,carType:e.car,incubatorFlag:e.stayWarmCode,premiumFlag:e.goldCode,urgentExpressPriceFlag:e.urgentCode,signForCodeFlag:e.signCode,userCouponId:e.discount.id,goodsPredictAmount:I,subsidy:e.addPirce,remark:e.remark,adcode:e.adcode},"POST");case 67:S=s.sent,e.orderId=S.data,e.$refs.popups.close(),e.$refs.popupPay.open(),e.countDownTimer(),s.next=81;break;case 74:return s.next=76,e.$fetch(e.$api.orderCreate,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:u,latitude:e.sendAddress.latitude,title:r,name:n,detail:i,userName:e.sendAddress.name,mobile:e.sendAddress.mobile}),endAddress:JSON.stringify({addressDetail:p,latitude:e.endAddress.latitude,title:a,name:c,detail:o,userName:e.endAddress.name,mobile:e.endAddress.mobile}),tip:e.giveGrant,goodsInventory:JSON.stringify({weight:e.shopInfo.weight,cost:e.shopInfo.price,goods:e.shopInfo.main}),distance:e.distance,type:e.scrollIndex,pickUpType:0,carType:e.car,incubatorFlag:e.stayWarmCode,premiumFlag:e.goldCode,urgentExpressPriceFlag:e.urgentCode,signForCodeFlag:e.signCode,userCouponId:e.discount.id,goodsPredictAmount:I,subsidy:e.addPirce,remark:e.remark,adcode:e.adcode},"POST");case 76:C=s.sent,e.orderId=C.data,e.$refs.popups.close(),e.$refs.popupPay.open(),e.countDownTimer();case 81:s.next=123;break;case 83:if("{}"!==JSON.stringify(e.discount)){s.next=104;break}if(2!==e.scrollIndex||0!==e.helpBuy){s.next=95;break}return console.log("创建5"),s.next=88,e.$fetch(e.$api.orderCreate,{buyAddressType:1,startAddress:JSON.stringify({addressDetail:p,latitude:e.endAddress.latitude,title:a,name:c,detail:o,userName:e.endAddress.name,mobile:e.endAddress.mobile}),endAddress:JSON.stringify({addressDetail:p,latitude:e.endAddress.latitude,title:a,name:c,detail:o,userName:e.endAddress.name,mobile:e.endAddress.mobile}),tip:e.giveGrant,goodsInventory:JSON.stringify({weight:e.shopInfo.weight,cost:e.shopInfo.price,goods:e.shopInfo.main}),distance:e.riderSide,type:e.scrollIndex,pickUpType:1,pickUpTime:e.choiceTime+":00:00",carType:e.car,incubatorFlag:e.stayWarmCode,premiumFlag:e.goldCode,urgentExpressPriceFlag:e.urgentCode,signForCodeFlag:e.signCode,goodsPredictAmount:h,subsidy:e.addPirce,remark:e.remark,adcode:e.adcode},"POST");case 88:T=s.sent,e.orderId=T.data,e.$refs.popups.close(),e.$refs.popupPay.open(),e.countDownTimer(),s.next=102;break;case 95:return s.next=97,e.$fetch(e.$api.orderCreate,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:u,latitude:e.sendAddress.latitude,title:r,name:n,detail:i,userName:e.sendAddress.name,mobile:e.sendAddress.mobile}),endAddress:JSON.stringify({addressDetail:p,latitude:e.endAddress.latitude,title:a,name:c,detail:o,userName:e.endAddress.name,mobile:e.endAddress.mobile}),tip:e.giveGrant,goodsInventory:JSON.stringify({weight:e.shopInfo.weight,cost:e.shopInfo.price,goods:e.shopInfo.main}),distance:e.distance,type:e.scrollIndex,pickUpType:1,pickUpTime:e.choiceTime+":00:00",carType:e.car,incubatorFlag:e.stayWarmCode,premiumFlag:e.goldCode,urgentExpressPriceFlag:e.urgentCode,signForCodeFlag:e.signCode,goodsPredictAmount:h,subsidy:e.addPirce,remark:e.remark,adcode:e.adcode},"POST");case 97:b=s.sent,e.orderId=b.data,e.$refs.popups.close(),e.$refs.popupPay.open(),e.countDownTimer();case 102:s.next=123;break;case 104:if(2!==e.scrollIndex||0!==e.helpBuy){s.next=114;break}return s.next=107,e.$fetch(e.$api.orderCreate,{buyAddressType:1,startAddress:JSON.stringify({addressDetail:p,latitude:e.endAddress.latitude,title:a,name:c,detail:o,userName:e.endAddress.name,mobile:e.endAddress.mobile}),endAddress:JSON.stringify({addressDetail:p,latitude:e.endAddress.latitude,title:a,name:c,detail:o,userName:e.endAddress.name,mobile:e.endAddress.mobile}),tip:e.giveGrant,goodsInventory:JSON.stringify({weight:e.shopInfo.weight,cost:e.shopInfo.price,goods:e.shopInfo.main}),distance:e.riderSide,type:e.scrollIndex,pickUpType:1,pickUpTime:e.choiceTime+":00:00",carType:e.car,incubatorFlag:e.stayWarmCode,premiumFlag:e.goldCode,urgentExpressPriceFlag:e.urgentCode,signForCodeFlag:e.signCode,userCouponId:e.discount.id,goodsPredictAmount:h,subsidy:e.addPirce,remark:e.remark,adcode:e.adcode},"POST");case 107:O=s.sent,e.orderId=O.data,e.$refs.popups.close(),e.$refs.popupPay.open(),e.countDownTimer(),s.next=123;break;case 114:return s.next=116,e.$fetch(e.$api.orderCreate,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:u,latitude:e.sendAddress.latitude,title:r,name:n,detail:i,userName:e.sendAddress.name,mobile:e.sendAddress.mobile}),endAddress:JSON.stringify({addressDetail:p,latitude:e.endAddress.latitude,title:a,name:c,detail:o,userName:e.endAddress.name,mobile:e.endAddress.mobile}),tip:e.giveGrant,goodsInventory:JSON.stringify({weight:e.shopInfo.weight,cost:e.shopInfo.price,goods:e.shopInfo.main}),distance:e.distance,type:e.scrollIndex,pickUpType:1,pickUpTime:e.choiceTime+":00:00",carType:e.car,incubatorFlag:e.stayWarmCode,premiumFlag:e.goldCode,urgentExpressPriceFlag:e.urgentCode,signForCodeFlag:e.signCode,userCouponId:e.discount.id,goodsPredictAmount:h,subsidy:e.addPirce,remark:e.remark,adcode:e.adcode},"POST");case 116:w=s.sent,console.log(w),console.log("88s"),e.orderId=w.data,e.$refs.popups.close(),e.$refs.popupPay.open(),e.countDownTimer();case 123:case"end":return s.stop()}}),s)})))()},countDownTimer:function(){var e=this;this.countDown=setInterval((function(){0===e.seconds&&0!==e.minutes?(e.seconds=59,e.minutes-=1):0===e.minutes&&0===e.seconds?(e.$refs.popupPay.close(),e.seconds=0,clearInterval(e.countDown),e.countDown=null,e.minutes=30,e.seconds=0):e.seconds-=1}),1e3)},num:function(e){return e<10?"0"+e:""+e},continueOrder:function(){var s=this;return n(d.default.mark((function t(){var r,i,n,a;return d.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!s.horsemanCircle){t.next=15;break}return s.addPirce=s.newAddPrice,s.isInitOrderPriceAjax(),s.horseman=!1,r=s.sendAddress.latitude.split(",")[1],i=s.sendAddress.latitude.split(",")[0],n=null,t.next=9,s.$fetch(s.$api.getScanRange,{},"GET","Form");case 9:a=t.sent,0===a.code&&(n=Number(a.data.taskScanRange)+Number(a.data.addSubsidyScanRange)),e.request({url:"https://tsapi.amap.com/v1/track/terminal/aroundsearch",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{key:"4145121d3d1b5dcf41702960f3bd5adc",sid:"126730",center:r+","+i,radius:1e3*n},success:function(e){s.horsemanCount=e.data.data.count,s.horsemanList=e.data.data.results,0==s.horseman&&s.$refs.popups.open()}}),s.$refs.popups.open(),t.next=16;break;case 15:e.showToast({icon:"none",title:"请仔细阅读并同意加收运力费协议"});case 16:case"end":return t.stop()}}),t)})))()},payOrder:function(){var s=this;return n(d.default.mark((function t(){var r,i,n;return d.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.showLoading({title:"正在下单中...."}),s.payFlag=!1,0!==s.circleShow){t.next=9;break}return t.next=5,s.$fetch(s.$api.orderPay,{orderId:s.orderId,payType:0},"POST","form");case 5:r=t.sent,0==r.code?(e.hideLoading(),e.showToast({icon:"success",title:r.msg}),clearInterval(s.countDown),s.countDown=null,s.minutes=30,s.seconds=0,s.$refs.popupPay.close(),setTimeout((function(){s.$dayjs().unix()<s.$dayjs("2020-05-28").unix()?e.reLaunch({url:"../index/index"}):e.reLaunch({url:"../SuccessOrder/SuccessOrder?orderId="+s.orderId})}),1500)):e.showToast({icon:"none",title:r.msg}),t.next=22;break;case 9:if(1!=s.circleShow){t.next=22;break}if(!e.getStorageSync("openId")){t.next=16;break}return t.next=13,s.$fetch(s.$api.orderPay,{orderId:s.orderId,payType:4,openId:e.getStorageSync("openId")},"POST","form");case 13:i=t.sent,t.next=19;break;case 16:return t.next=18,s.$fetch(s.$api.orderPay,{orderId:s.orderId,payType:4},"POST","form");case 18:i=t.sent;case 19:n=i.data,e.hideLoading(),e.requestPayment({provider:"wxpay",timeStamp:n.timeStamp,nonceStr:n.nonceStr,package:n.package,signType:n.signType,paySign:n.sign,success:function(t){e.showToast({icon:"success",title:"支付成功"}),clearInterval(s.countDown),s.countDown=null,s.minutes=30,s.seconds=0,s.$refs.popupPay.close(),setTimeout((function(){e.navigateTo({url:"../SuccessOrder/SuccessOrder?orderId="+s.orderId})}),1500)},fail:function(s){e.showToast({icon:"none",title:"支付失败"})}});case 22:case"end":return t.stop()}}),t)})))()},initRichText:function(){var e=this;return n(d.default.mark((function s(){var t;return d.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.$fetch(e.$api.articleType,{type:5},"Post","Form");case 2:t=s.sent,0==t.code&&(e.RichText=t.data);case 4:case"end":return s.stop()}}),s)})))()},goToRichText:function(s){e.navigateTo({url:"../../packageA/rich-text/rich-text?id="+s})},choiceHelpbuyCircle:function(){this.helpbuyCircle=!this.helpbuyCircle}}};s.default=o}).call(this,t("543d")["default"])},5988:function(e,s,t){"use strict";var d={"uni-popup":function(){return t.e("components/uni-popup/uni-popup").then(t.bind(null,"8626"))}},r=function(){var e=this,s=e.$createElement,t=(e._self._c,JSON.stringify(e.shopInfo)),d=JSON.stringify(e.discount),r=JSON.stringify(e.orderComputed),i=JSON.stringify(e.orderComputed),n=JSON.stringify(e.orderComputed),a=JSON.stringify(e.orderComputed),o=JSON.stringify(e.orderComputed),c=JSON.stringify(e.orderComputed),u=JSON.stringify(e.orderComputed),l=JSON.stringify(e.discount),p=JSON.stringify(e.orderComputed),g=(e.orderComputed.taskReward-e.orderComputed.payAmount).toFixed(2),h=JSON.stringify(e.orderComputed);e.$mp.data=Object.assign({},{$root:{g0:t,g1:d,g2:r,g3:i,g4:n,g5:a,g6:o,g7:c,g8:u,g9:l,g10:p,g11:g,g12:h}})},i=[];t.d(s,"b",(function(){return r})),t.d(s,"c",(function(){return i})),t.d(s,"a",(function(){return d}))},"6f88":function(e,s,t){},7646:function(e,s,t){"use strict";var d=t("6f88"),r=t.n(d);r.a},"95f2":function(e,s,t){"use strict";(function(e){t("297d");d(t("66fd"));var s=d(t("4a59"));function d(e){return e&&e.__esModule?e:{default:e}}e(s.default)}).call(this,t("543d")["createPage"])}},[["95f2","common/runtime","common/vendor"]]]);