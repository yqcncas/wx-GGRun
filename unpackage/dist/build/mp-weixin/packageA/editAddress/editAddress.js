(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["packageA/editAddress/editAddress"],{"5cf7":function(e,s,d){"use strict";d.r(s);var t=d("e6ab"),r=d.n(t);for(var a in t)"default"!==a&&function(e){d.d(s,e,(function(){return t[e]}))}(a);s["default"]=r.a},"6f55":function(e,s,d){},"7cb6":function(e,s,d){"use strict";d.r(s);var t=d("a3e8"),r=d("5cf7");for(var a in r)"default"!==a&&function(e){d.d(s,e,(function(){return r[e]}))}(a);d("c4d1");var i,o=d("f0c5"),n=Object(o["a"])(r["default"],t["b"],t["c"],!1,null,null,null,!1,t["a"],i);s["default"]=n.exports},a3e8:function(e,s,d){"use strict";var t,r=function(){var e=this,s=e.$createElement;e._self._c},a=[];d.d(s,"b",(function(){return r})),d.d(s,"c",(function(){return a})),d.d(s,"a",(function(){return t}))},c4d1:function(e,s,d){"use strict";var t=d("6f55"),r=d.n(t);r.a},e59b:function(e,s,d){"use strict";(function(e){d("297d");t(d("66fd"));var s=t(d("7cb6"));function t(e){return e&&e.__esModule?e:{default:e}}e(s.default)}).call(this,d("543d")["createPage"])},e6ab:function(e,s,d){"use strict";(function(e){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var t=r(d("4795"));function r(e){return e&&e.__esModule?e:{default:e}}function a(e,s,d,t,r,a,i){try{var o=e[a](i),n=o.value}catch(l){return void d(l)}o.done?s(n):Promise.resolve(n).then(t,r)}function i(e){return function(){var s=this,d=arguments;return new Promise((function(t,r){var i=e.apply(s,d);function o(e){a(i,t,r,o,n,"next",e)}function n(e){a(i,t,r,o,n,"throw",e)}o(void 0)}))}}var o={onLoad:function(s){if(void 0==s.addressDetail&&(s.addressDetail=""),0==s.status&&e.setNavigationBarTitle({title:"编辑地址填写"}),0==s.addressInfo||0==s.status?e.setNavigationBarTitle({title:"发件地址填写"}):1==s.addressInfo||1==s.status?e.setNavigationBarTitle({title:"收件地址填写"}):3==s.status&&e.setNavigationBarTitle({title:"编辑地址填写"}),this.status=s.status,this.addressInfo=s.addressInfo,0==s.addressInfo&&1==s.addressInfo||(this.addressInfo=JSON.parse(s.addressInfo),console.log(this.addressInfo),"undefined"==this.addressInfo.addressDetail&&(this.addressInfo.addressDetail=""),this.userName=this.addressInfo.name,this.userPhone=this.addressInfo.mobile,this.addressInfo.addressDetail instanceof Array?(console.log(this.addressInfo.addressDetail),this.editAddress.name=this.addressInfo.addressDetail[2],this.editAddress.address=this.addressInfo.addressDetail[0],this.editAddress.latitude=this.addressInfo.latitude.split(",")[1],this.editAddress.longitude=this.addressInfo.latitude.split(",")[0],this.detailAddress=this.addressInfo.addressDetail[1],"undefined"===this.detailAddress&&(this.detailAddress="")):(this.editAddress=this.addressInfo.editAddress,this.detailAddress=this.addressInfo.addressDetail,"undefined"===this.detailAddress&&(this.detailAddress="")),this.city=this.addressInfo.city,this.province=this.addressInfo.province,this.area=this.addressInfo.area,this.addressLongitude=this.addressInfo.latitude,this.orderId=this.addressInfo.id),""!==s.ftSendAddress){var d=JSON.parse(s.ftSendAddress);this.editAddress={},this.editAddress.name=d.titleName,this.editAddress.address=d.addressname,this.editAddress.latitude=d.location.split(",")[1],this.editAddress.longitude=d.location.split(",")[0]}},onUnload:function(){e.hideKeyboard()},data:function(){return{addressStatus:"",newAddressStatus:"",editId:"",circleIndex:!0,editAddress:{name:"",address:"",latitude:"",longitude:""},userName:"",userPhone:"",detailAddress:"",province:"",city:"",area:"",defaultFlag:0,addressLongitude:"",addressInfo:"",allTitle:"",orderId:"",status:"",checkPhone:"",autoFill:"",autoFillLatitude:"",holder:"粘贴整段发货信息，系统会智能识别并且填写地址姓名电话。",nstartSendAddress:{}}},methods:{saveAddress:function(){this.circleIndex=!this.circleIndex,this.circleIndex?this.defaultFlag=0:this.defaultFlag=1,console.log(this.defaultFlag)},clearForm:function(){this.userName="",this.userPhone="",this.editAddress={},this.detailAddress=""},getContacts:function(){var e=this;if("Android"==plus.os.name)plus.contacts.getAddressBook(plus.contacts.ADDRESSBOOK_PHONE,(function(s){var d=1e3,t=plus.android.runtimeMainActivity(),r=plus.android.importClass("android.content.Intent"),a=plus.android.importClass("android.provider.ContactsContract"),i=new r(r.ACTION_PICK,a.Contacts.CONTENT_URI);t.onActivityResult=function(s,r,i){if(d==s){var o="",n=t;plus.android.importClass(i);var l=i.getData(),u=n.getContentResolver();plus.android.importClass(u);var c=u.query(l,null,null,null,null);plus.android.importClass(c),c.moveToFirst();var f=c.getString(c.getColumnIndex(a.Contacts.DISPLAY_NAME))||"",h=c.getString(c.getColumnIndex(a.Contacts._ID)),A=u.query(a.CommonDataKinds.Phone.CONTENT_URI,null,a.CommonDataKinds.Phone.CONTACT_ID+" = "+h,null,null);A.moveToNext()&&(o=A.getString(A.getColumnIndex(a.CommonDataKinds.Phone.NUMBER))),o=o.replace(/\s/g,""),o=o.replace(/-/g,""),e.userName=f,e.userPhone=o,callBack&&callBack(f,o),c.close(),A.close()}},t.startActivityForResult(i,d)}));else{var s=plus.ios.newObject("ABPeoplePickerNavigationController");console.log(2);var d=plus.ios.implements("ABPeoplePickerNavigationControllerDelegate",{"peoplePickerNavigationController:didSelectPerson:":function(s,d){console.log(JSON.stringify(s)),console.log(JSON.stringify(d)),console.log(typeof d);var t=s,r="",a=t.plusGetAttribute("familyName"),i=t.plusGetAttribute("givenName");r=a+i;var o="",n=t.plusGetAttribute("phoneNumbers");if(n.plusGetAttribute("count")>0){var l=n.plusGetAttribute("firstObject"),u=l.plusGetAttribute("value");o=u.plusGetAttribute("stringValue")}console.log(r,o),o=o.replace(/\s/g,""),o=o.replace(/-/g,""),e.userName=r,e.userPhone=o,console.log(e.userName,e.userPhone),callBack&&callBack(r,o)}});plus.ios.invoke(s,"setPeoplePickerDelegate:",d);var t=plus.ios.importClass("UIApplication"),r=t.sharedApplication(),a=plus.ios.invoke(r,"delegate"),i=plus.ios.invoke(a,"window"),o=plus.ios.invoke(i,"rootViewController");plus.ios.invoke(o,"presentViewController:animated:completion:",s,!0,null)}},autoFillFn:function(){var s=this,d=this.smartParse(this.autoFill);if(""!==this.autoFill.trim()){this.userName=d.name,this.userPhone=d.phone,this.province=d.province,this.city=d.city,this.area=d.county;var t=d.address,r=this;e.request({url:"https://restapi.amap.com/v3/geocode/geo?address="+this.province+this.city+this.area+t+"&output=JSON&key=6223011d1e55de8ee9d00617ee5270c2",method:"GET",success:function(d){s.autoFillLatitude=d.data.geocodes[0].location,s.editAddress={},e.request({url:"https://restapi.amap.com/v3/geocode/regeo?output=JSON&location="+s.autoFillLatitude+"&key=6223011d1e55de8ee9d00617ee5270c2&radius=1000&extensions=all",method:"GET",success:function(e){0==e.data.regeocode.aois.length?(s.$set(r.editAddress,"name",e.data.regeocode.pois[1].address),s.$set(r.editAddress,"address",e.data.regeocode.formatted_address),s.$set(r.editAddress,"longitude",r.autoFillLatitude.split(",")[0]),s.$set(r.editAddress,"latitude",r.autoFillLatitude.split(",")[1])):(s.$set(r.editAddress,"name",e.data.regeocode.aois[0].name),s.$set(r.editAddress,"address",e.data.regeocode.formatted_address),s.$set(r.editAddress,"longitude",r.autoFillLatitude.split(",")[0]),s.$set(r.editAddress,"latitude",r.autoFillLatitude.split(",")[1]))}})}})}},focusAutoFill:function(){this.holder="粘贴整段发货信息，系统会智能识别并且填写地址姓名电话。例如:G小哥,132****0000,广东省深圳市南山区某某街道某某大厦001号"},openMap:function(){var s=this;e.authorize({scope:"scope.userLocation",success:function(){e.chooseLocation({success:function(d){console.log(d),s.editAddress=d,console.log(s.editAddress),s.editAddress&&e.request({url:"https://restapi.amap.com/v3/geocode/regeo?output=JSON&location="+s.editAddress.longitude+","+s.editAddress.latitude+"&key=6223011d1e55de8ee9d00617ee5270c2&radius=1000&extensions=all",success:function(e){console.log(e),"地图位置"===s.editAddress.name&&(console.log(e.data.regeocode),e.data.regeocode.aois.length?s.editAddress.name=e.data.regeocode.aois[0].name:s.editAddress.name=e.data.regeocode.pois[0].name),s.editAddress.address=e.data.regeocode.formatted_address,s.province=e.data.regeocode.addressComponent.province,s.city=e.data.regeocode.addressComponent.city,s.area=e.data.regeocode.addressComponent.district}})}})},fail:function(){e.showModal({title:"授权提示",content:"暂未授权, 是否授权",showCancel:!1,success:function(s){e.openSetting()}})}})},checkPhoneNumber:function(){var e=/^1[3456789]\d{9}$/;return e.test(this.userPhone)?(this.checkPhone=!1,console.log(this.checkPhone),!0):(this.checkPhone=!0,console.log(this.checkPhone),!1)},submitAddress:function(){var s=this;return i(t.default.mark((function d(){var r,a,i,o,n,l,u,c,f,h,A;return t.default.wrap((function(d){while(1)switch(d.prev=d.next){case 0:if(!s.checkPhone){d.next=3;break}return e.showToast({icon:"none",title:"手机号码填写错误，请检查"}),d.abrupt("return");case 3:if(""!=s.userName&&""!=s.userPhone&&""!=s.editAddress.name){d.next=6;break}return e.showToast({icon:"none",title:"姓名/手机/地址必须填写"}),d.abrupt("return");case 6:if(""!=s.userName.trim()){d.next=8;break}return d.abrupt("return",e.showToast({icon:"none",title:"请填写姓名"}));case 8:if(s.addressLongitude=s.editAddress.longitude+","+s.editAddress.latitude,s.allTitle=s.editAddress.address+","+s.detailAddress+","+s.editAddress.name,void 0==s.addressDetail&&(s.addressDetail=""),0!=s.addressInfo&&1!=s.addressInfo){d.next=24;break}if(void 0!=s.detailAddress&&""!=s.detailAddress||(s.detailAddress=""),0!=s.defaultFlag){d.next=21;break}return d.next=16,s.$fetch(s.$api.addAddress,{addressDetail:s.allTitle,area:s.area,city:s.city,defaultFlag:1,latitude:s.addressLongitude,mobile:s.userPhone,name:s.userName,province:s.province},"POST","form");case 16:d.sent,0==s.addressInfo&&(r={addressDetail:s.detailAddress,latitude:s.addressLongitude,mobile:s.userPhone,name:s.userName,province:s.province,editAddress:s.editAddress,city:s.city,area:s.area,orderId:s.orderId},0!=s.status&&(console.log("1"),e.setStorageSync("sendAddress",JSON.stringify(r)))),1==s.addressInfo&&(void 0==s.detailAddress&&(s.detailAddress=""),a={addressDetail:s.detailAddress,latitude:s.addressLongitude,mobile:s.userPhone,name:s.userName,province:s.province,editAddress:s.editAddress,city:s.city,area:s.area,orderId:s.orderId},e.setStorageSync("endAddress",JSON.stringify(a))),d.next=24;break;case 21:void 0==s.detailAddress&&(s.detailAddress=""),0==s.addressInfo&&(i={addressDetail:s.detailAddress,latitude:s.addressLongitude,mobile:s.userPhone,name:s.userName,province:s.province,editAddress:s.editAddress,city:s.city,area:s.area,orderId:s.orderId},console.log("2"),e.setStorageSync("sendAddress",JSON.stringify(i))),1==s.addressInfo&&(void 0==s.detailAddress&&(s.detailAddress=""),o={addressDetail:s.detailAddress,latitude:s.addressLongitude,mobile:s.userPhone,name:s.userName,province:s.province,editAddress:s.editAddress,city:s.city,area:s.area,orderId:s.orderId},e.setStorageSync("endAddress",JSON.stringify(o)));case 24:if(3!=s.status&&0!=s.status&&1!=s.status){d.next=47;break}if(void 0==s.detailAddress&&(s.detailAddress=""),s.addressLongitude=s.editAddress.longitude+","+s.editAddress.latitude,s.allTitle=s.editAddress.address+","+s.detailAddress+","+s.editAddress.name,""==s.orderId||void 0==s.orderId){d.next=35;break}return d.next=31,s.$fetch(s.$api.updateAddress,{addressDetail:s.allTitle,area:s.area,city:s.city,defaultFlag:1,latitude:s.addressLongitude,mobile:s.userPhone,name:s.userName,province:s.province,id:s.orderId},"POST","form");case 31:n=d.sent,0==n.code&&(0==s.status&&(void 0==s.detailAddress&&(s.detailAddress=""),console.log(s.addressLongitude),l={addressDetail:s.detailAddress,latitude:s.addressLongitude,mobile:s.userPhone,name:s.userName,province:s.province,editAddress:s.editAddress,city:s.city,area:s.area,orderId:s.orderId},console.log("3"),e.setStorageSync("sendAddress",JSON.stringify(l))),1==s.status&&(void 0==s.detailAddress&&(s.detailAddress=""),u={addressDetail:s.detailAddress,latitude:s.addressLongitude,mobile:s.userPhone,name:s.userName,province:s.province,editAddress:s.editAddress,city:s.city,area:s.area,orderId:s.orderId},e.setStorageSync("endAddress",JSON.stringify(u)))),d.next=47;break;case 35:if(0!=s.defaultFlag){d.next=44;break}if(""===s.addressInfo){d.next=42;break}return d.next=39,s.$fetch(s.$api.addAddress,{addressDetail:s.allTitle,area:s.area,city:s.city,defaultFlag:1,latitude:s.addressLongitude,mobile:s.userPhone,name:s.userName,province:s.province},"POST","form");case 39:d.sent,0==s.status&&(c={addressDetail:s.detailAddress,latitude:s.addressLongitude,mobile:s.userPhone,name:s.userName,province:s.province,editAddress:s.editAddress,city:s.city,area:s.area,orderId:s.orderId},console.log("4"),console.log(e.getStorageSync("noSetSend")),e.getStorageSync("noSetSend")||(e.setStorageSync("sendAddress",JSON.stringify(c)),e.removeStorageSync("noSetSend"))),1==s.status&&(void 0==s.detailAddress&&(s.detailAddress=""),f={addressDetail:s.detailAddress,latitude:s.addressLongitude,mobile:s.userPhone,name:s.userName,province:s.province,editAddress:s.editAddress,city:s.city,area:s.area,orderId:s.orderId},e.setStorageSync("endAddress",JSON.stringify(f)));case 42:d.next=47;break;case 44:void 0==s.detailAddress&&(s.detailAddress=""),0==s.status&&(h={addressDetail:s.detailAddress,latitude:s.addressLongitude,mobile:s.userPhone,name:s.userName,province:s.province,editAddress:s.editAddress,city:s.city,area:s.area,orderId:s.orderId},console.log("5"),e.setStorageSync("sendAddress",JSON.stringify(h))),1==s.status&&(void 0==s.detailAddress&&(s.detailAddress=""),A={addressDetail:s.detailAddress,latitude:s.addressLongitude,mobile:s.userPhone,name:s.userName,province:s.province,editAddress:s.editAddress,city:s.city,area:s.area,orderId:s.orderId},e.setStorageSync("endAddress",JSON.stringify(A)));case 47:e.navigateBack({delta:1});case 48:case"end":return d.stop()}}),d)})))()}}};s.default=o}).call(this,d("543d")["default"])}},[["e59b","common/runtime","common/vendor"]]]);